# 深圳市保障房政策追踪与匹配助手

一个自动追踪深圳市保障房政策并根据个人情况智能匹配的工具。

## 功能特点

- 🏠 自动搜索深圳市及各区住建局最新保障房政策
- 👤 根据个人情况智能匹配最适合的房源
- 🚗 集成高德地图 API，分析交通便利性（到公司、深圳北、宝安机场）
- 📊 按匹配度排序，推荐最适合的房源
- 🔗 提供一键申请链接和常用网址入口

## 安装

### 前置要求
- Python 3.7+
- pip

### 安装依赖

```bash
cd ~/.claude/skills/sz-housing-matcher
pip install -r requirements.txt
```

或手动安装：
```bash
pip install requests beautifulsoup4
```

## 使用方法

### 在 Claude Code 中使用

```bash
# 首次使用，配置个人信息
/sz-housing-matcher setup

# 搜索最新政策并匹配
/sz-housing-matcher search

# 修改配置
/sz-housing-matcher config

# 查看历史记录
/sz-housing-matcher history
```

### 作为独立脚本使用

```bash
# 首次配置
python sz_housing_matcher.py setup

# 搜索政策
python sz_housing_matcher.py search
```

## 配置说明

### 首次配置需要填写的信息

#### 基本信息
- 户籍情况（深圳户籍/非深户）
- 年龄
- 社保缴纳年限
- 学历
- 家庭结构
- 手机号

#### 资产信息
- 家庭年收入
- 是否拥有深圳房产
- 是否拥有车辆
- 家庭资产总额

#### 偏好设置
- 期望区域（可多选，如：福田、南山、宝安）
- 住房类型（可多选，如：安居房、人才房）
- 户型偏好（如：两房一厅）
- 预算范围（如：200-400万）

#### 交通信息
- 公司地址
- 公司名称（可选）
- 通勤方式（开车/地铁/公交）

### 高德地图 API Key 配置

要使用交通分析功能，需要配置高德地图 API Key：

1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册并登录
3. 创建应用，选择「Web服务」
4. 获取 API Key
5. 在配置过程中输入 API Key

**注意：**
- 高德地图 Web服务 API 免费配额：每天 100 万次调用
- 个人使用完全足够

## 文件结构

```
sz-housing-matcher/
├── SKILL.md                  # Claude Code Skill 定义文件
├── README.md                 # 使用说明
├── sz_housing_matcher.py     # 核心脚本
├── urls.json                 # 住建局网址列表
├── config.template.json      # 配置文件模板
└── requirements.txt          # Python 依赖
```

## 配置文件位置

- 配置目录：`~/.sz-housing/`
- 主配置文件：`~/.sz-housing/config.json`

## 匹配算法

### 排序权重

| 因素 | 权重 | 说明 |
|------|------|------|
| 区域匹配 | 30% | 期望区域优先 |
| 通勤便利性 | 25% | 到公司的距离和时间 |
| 发布时间 | 20% | 最新政策优先 |
| 房源数量 | 15% | 房源越多分数越高 |
| 其他因素 | 10% | 户型、价格等 |

### 通勤评分标准

| 通勤时间 | 评分 |
|---------|------|
| 20分钟以内 | 优秀 ✓✓ |
| 20-40分钟 | 良好 ✓ |
| 40-60分钟 | 一般 |
| 超过60分钟 | 较远 |

## 开发路线图

### ✅ 已完成
- [x] Skill 定义文件
- [x] 住建局网址列表
- [x] 配置管理系统
- [x] 基础匹配算法
- [x] 高德地图 API 集成

### 🚧 开发中
- [ ] 实际网页抓取功能
- [ ] 历史记录功能
- [ ] 配置修改功能

### 📋 计划中
- [ ] 定时自动搜索
- [ ] 微信通知
- [ ] 数据可视化
- [ ] 微信公众号文章抓取
- [ ] 小红书帖子抓取

## 注意事项

1. **API 使用限制**：高德地图 API 有每日调用次数限制，请注意合理使用
2. **网站结构变化**：住建局网站结构可能变化，需要定期维护
3. **数据准确性**：所有信息以官方发布为准
4. **隐私保护**：用户信息仅存储在本地

## 常见问题

### Q: 如何更新配置？

```bash
/sz-housing-matcher config
```

或直接编辑配置文件：
```bash
vim ~/.sz-housing/config.json
```

### Q: 如何查看历史搜索结果？

```bash
/sz-housing-matcher history
```

### Q: API 调用次数超限怎么办？

- 免费配额：每天 100 万次
- 个人使用一般不会超限
- 如需更多，可升级付费服务

### Q: 网站抓取失败怎么办？

- 检查网络连接
- 网站结构可能已变化，需要更新代码
- 可以手动访问官网查看

## 贡献

欢迎提交 Issue 和 Pull Request！

## 许可证

MIT License

## 联系方式

如有问题或建议，欢迎反馈。

---

**免责声明**：本工具仅供信息参考，具体申请条件和流程以官方发布为准。
